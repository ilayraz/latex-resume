%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ilay Raz CV Template
%
% Adapted from Freeman Curriculum Vitae
% http://www.LaTeXTemplates.com
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
% Package and Doc configs
%----------------------------------------------------------------------------------------

\usepackage{etoolbox} % Conditional statements

\setlength\parindent{0pt} % No paragraph indentation

\usepackage{supertabular} % Tables span multiple pages

%% Document margins

\usepackage{geometry} % Page dimensions and margins

\geometry{
  hmargin=1.5cm,
  vmargin=1.75cm,
  a4paper,
  %showframe, % Uncomment to debug type block on page
}

%----------------------------------------------------------------------------------------
% Column layout
%----------------------------------------------------------------------------------------

\usepackage{paracol} % Create multi-column layouts that spam pages

\columnratio{0.55, 0.45} % Relative ratios of 2-col CV

\setlength\columnsep{0.05\textwidth} % Amount of space between columns

%----------------------------------------------------------------------------------------
% Fonts
%----------------------------------------------------------------------------------------
\usepackage{fontspec} % Specify custom fonts in XeLaTeX

\setmainfont[Ligatures=TeX]{EB Garamond} % Use Droid Sans by default

\newfontfamily{\arvo}{Arvo}

\newfontfamily{\FA}{FontAwesome}
\input{fontawesomesymbols-xeluatex.tex} % FIle for shortcuts to icons

%----------------------------------------------------------------------------------------
% Colors & Links
%----------------------------------------------------------------------------------------

\usepackage[usenames,svgnames]{xcolor} % Allows definition & use of custom colors

\definecolor{text}{HTML}{666666} % Main document font color
\definecolor{section}{HTML}{ff0000} % Section title color
\definecolor{heading}{HTML}{000000} % Headings color
\definecolor{linkcolor}{HTML}{641c1d} % 25% desaturated headings color for links

\color{text} % Set default text color

%------------------------------------------------

\usepackage{hyperref} % For links

\hypersetup{colorlinks, breaklinks, urlcolor=linkcolor, linkcolor=linkcolor}


%----------------------------------------------------------------------------------------
% Headers & Footers
%----------------------------------------------------------------------------------------

\usepackage{fancyhdr}

\pagestyle{fancy} % Allows custom headers & footers

\fancyhf{} % Supress all headers & footers by default

\renewcommand{\headrulewidth}{0pt} % Remove default rule under header

%----------------------------------------------------------------------------------------
% Sections
%----------------------------------------------------------------------------------------

% Modify sections. nobottomtitles for pushing section title to next page
\usepackage[nobottomtitles*]{titlesec}

% Modify minimal space required from bottom margin not to move to next page
\renewcommand{\bottomtitlespace}{0.1\textheight}

% Define the \section format
\titleformat{\section}{\color{section}\scshape\LARGE\raggedright}{}{0em}{}[\color{black}\titlerule]

% Spacing around section titles. left right before after
\titlespacing{\section}{0pt}{0pt}{8pt}

%----------------------------------------------------------------------------------------
% Custom Commands
%----------------------------------------------------------------------------------------

% Set bullet points to be arrows
\renewcommand{\labelitemi}{\faArrowRight}

% Command for entering new work position
\newcommand{\workposition}[6]{
  % Duration and conditional full time/part time text
  {\raggedleft\textsc{#1\expandafter\ifstrequal\expandafter{#2}{}{}
      {\hspace{6pt}\footnotesize{{(#2)}}}}\par}
  % Employer
  \expandafter\ifstrequal\expandafter{#3}{}{}{{\raggedright\large #3} \\}
  % Job title
  \expandafter\ifstrequal\expandafter{#4}{}{}{{\raggedright\large\textit{\textbf{#4}}}}
  % Description
  \expandafter\ifstrequal\expandafter{#5}{}{}{\\[4pt]#5\\}
  % Bullet points
  \expandafter\ifstrequal\expandafter{#6}{}{}{\begin{itemize}#6\end{itemize}}
}

% Command for entering a seperate qualification
\newcommand{\educationentry}[5]{
  % Duration and degree
  \textsc{#1} & \textbf{#2}\\
  % Honors, achievments, etc.
  \expandafter\ifstrequal\expandafter{#3}{}{}{& {\small\textsc{#3}}\\}
  % Department
  \expandafter\ifstrequal\expandafter{#4}{}{}{& #4\\}
  % Institution
  \expandafter\ifstrequal\expandafter{#5}{}{}{& \textit{#5}\\[6pt]}
}

% Command for entering a seperate table row. Use for generic visual element
% in any section that uses a two-col table
\newcommand{\tableentry}[3]{
  % Heading, content, conditional whitespace if non-empty
  \textsc{#1} & #2\expandafter\ifstrequal\expandafter{#3}{}{\\}{\\[6pt]}
}

% Command for long-form description with a title on one line and paragraph description below
\newcommand{\longformdescription}[2]{
  \textit{#1}\\[3pt]
  #2\medskip
}

% Command for long-form publication
\newcommand{\longformpublication}[1]{
  #1\medskip
}

% Command for short DOI publication
\newcommand{\doipublication}[4]{
  % Year
  #1 &
  % DOI string and first author if entered
  \href{http://dx.doi.org/#2}{\expandafter\ifstrequal\expandafter{#3}
    {firstauthor}{\textbf{doi:#2}}{doi:#2}}
  % Conditional insertion of whitespace if 4th para is non-empty
  \expandafter\ifstrequal\expandafter{#4}{}{\\}{\\[3pt]}
}
